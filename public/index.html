<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NIRD Security Lab - DÃ©monstration de VulnÃ©rabilitÃ©</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts. googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <span class="logo-icon">ğŸ›¡ï¸</span>
          <div class="logo-text-container">
            <span class="logo-text">NIRD</span>
            <span class="logo-subtext">Security Lab</span>
          </div>
          <span class="logo-badge">Ã‰DUCATIF</span>
        </div>
        <nav class="header-nav">
          <a href="https://nird.forge.apps.education.fr/" target="_blank" class="nav-link">
            <span>ğŸ“š</span> DÃ©couvrir NIRD
          </a>
          <div class="header-status">
            <span class="status-indicator vulnerable"></span>
            <span class="status-text">Mode DÃ©monstration</span>
          </div>
        </nav>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-content">
        <div class="hero-badge">ğŸ° Le Village NumÃ©rique RÃ©sistant</div>
        <h1 class="hero-title">
          Comprendre les failles pour mieux <span class="highlight">rÃ©sister</span>
        </h1>
        <p class="hero-description">
          Dans ce laboratoire interactif, dÃ©couvrez comment une <strong>race condition</strong> 
          peut compromettre un systÃ¨me mal conÃ§u, et apprenez les bonnes pratiques 
          pour construire des applications <strong>robustes et durables</strong>.
        </p>
        <div class="hero-stats">
          <div class="hero-stat">
            <span class="hero-stat-icon">ğŸ”“</span>
            <span class="hero-stat-label">Faille dÃ©montrÃ©e</span>
            <span class="hero-stat-value">Race Condition</span>
          </div>
          <div class="hero-stat">
            <span class="hero-stat-icon">ğŸ¯</span>
            <span class="hero-stat-label">Objectif</span>
            <span class="hero-stat-value">Sensibilisation</span>
          </div>
          <div class="hero-stat">
            <span class="hero-stat-icon">ğŸ›¡ï¸</span>
            <span class="hero-stat-label">Solution</span>
            <span class="hero-stat-value">Transactions Atomiques</span>
          </div>
        </div>
      </div>
      <div class="hero-illustration">
        <div class="village-scene">
          <div class="village-house house-1">ğŸ </div>
          <div class="village-house house-2">ğŸ«</div>
          <div class="village-house house-3">ğŸ›ï¸</div>
          <div class="village-shield">ğŸ›¡ï¸</div>
          <div class="attack-arrows">
            <span class="arrow arrow-1">âš¡</span>
            <span class="arrow arrow-2">âš¡</span>
            <span class="arrow arrow-3">âš¡</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Alert Banner -->
    <div class="alert-banner">
      <span class="alert-icon">ğŸ“</span>
      <span class="alert-text">
        <strong>Objectif pÃ©dagogique :</strong> Ce simulateur contient une faille de sÃ©curitÃ© 
        <strong>intentionnelle</strong> pour dÃ©montrer l'importance de la qualitÃ© du code 
        dans les systÃ¨mes numÃ©riques Ã©ducatifs.
      </span>
    </div>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Context Section -->
      <section class="context-section">
        <div class="context-card">
          <div class="context-icon">ğŸ¤”</div>
          <h3>Pourquoi ce laboratoire ?</h3>
          <p>
            Les Big Tech imposent souvent des solutions fermÃ©es et opaques. 
            Comprendre les failles de sÃ©curitÃ© permet aux Ã©tablissements scolaires 
            de faire des choix Ã©clairÃ©s et de privilÃ©gier des <strong>solutions libres, 
            auditables et durables</strong>.
          </p>
        </div>
        <div class="context-card">
          <div class="context-icon">ğŸ¯</div>
          <h3>Le scÃ©nario</h3>
          <p>
            Simulez un systÃ¨me de gestion de <strong>crÃ©dits informatiques</strong> scolaires.  
            Chaque Ã©tablissement dispose d'un budget pour installer des logiciels.  
            DÃ©couvrez comment une faille peut permettre de dÃ©penser plus que prÃ©vu ! 
          </p>
        </div>
        <div class="context-card">
          <div class="context-icon">ğŸ’¡</div>
          <h3>Ce que vous apprendrez</h3>
          <p>
            Les concepts de <strong>race condition</strong>, <strong>TOCTOU</strong>, 
            et les bonnes pratiques de dÃ©veloppement sÃ©curisÃ© applicables 
            aux logiciels libres Ã©ducatifs. 
          </p>
        </div>
      </section>

      <!-- Stats Bar -->
      <section class="stats-bar">
        <div class="stat-item">
          <span class="stat-label">ğŸ’° Budget total systÃ¨me</span>
          <span class="stat-value" id="totalBalance">2000 crÃ©dits</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">ğŸ“Š Budget attendu</span>
          <span class="stat-value expected">2000 crÃ©dits</span>
        </div>
        <div class="stat-item anomaly-indicator" id="anomalyIndicator">
          <span class="stat-label">âš ï¸ Anomalie dÃ©tectÃ©e</span>
          <span class="stat-value anomaly" id="anomalyAmount">0 crÃ©dits</span>
        </div>
        <button class="btn btn-reset" onclick="resetDatabase()">
          ğŸ”„ RÃ©initialiser le systÃ¨me
        </button>
      </section>

      <!-- Accounts Section -->
      <section class="accounts-section">
        <h2 class="section-title">
          <span class="title-icon">ğŸ«</span>
          Ã‰tablissements scolaires
          <span class="section-subtitle">Budget en crÃ©dits logiciels</span>
        </h2>
        <div class="accounts-grid" id="accountsGrid">
          <!-- Accounts will be loaded here -->
        </div>
      </section>

      <!-- Transfer Section -->
      <section class="transfer-section">
        <div class="transfer-card">
          <h2 class="section-title">
            <span class="title-icon">ğŸ“¤</span>
            TransfÃ©rer des crÃ©dits
          </h2>
          <p class="transfer-description">
            Simulez un transfert de budget entre Ã©tablissements.  
            Ce formulaire fonctionne normalement (une requÃªte Ã  la fois). 
          </p>
          <form class="transfer-form" id="transferForm">
            <div class="form-row">
              <div class="form-group">
                <label for="fromAccount">De (Ã©tablissement source)</label>
                <select id="fromAccount" required>
                  <option value="">SÃ©lectionner... </option>
                </select>
              </div>
              <div class="form-arrow">â†’</div>
              <div class="form-group">
                <label for="toAccount">Vers (Ã©tablissement cible)</label>
                <select id="toAccount" required>
                  <option value="">SÃ©lectionner...</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label for="amount">Montant (crÃ©dits)</label>
              <input type="number" id="amount" min="1" step="1" placeholder="100" required>
            </div>
            <button type="submit" class="btn btn-primary btn-transfer">
              <span class="btn-text">TransfÃ©rer les crÃ©dits</span>
              <span class="btn-loader" hidden></span>
            </button>
          </form>
        </div>

        <!-- Exploit Section -->
        <div class="exploit-card">
          <div class="exploit-header">
            <h2 class="section-title danger">
              <span class="title-icon">âš¡</span>
              Zone de dÃ©monstration
            </h2>
            <span class="exploit-badge">FAILLE TOCTOU</span>
          </div>
          <p class="exploit-description">
            <strong>ğŸ¯ Objectif :</strong> DÃ©montrer qu'un systÃ¨me mal conÃ§u peut Ãªtre exploitÃ© 
            par des requÃªtes simultanÃ©es.  Le <strong>LycÃ©e Carnot</strong> (1000 crÃ©dits) 
            va tenter de transfÃ©rer plus qu'il ne possÃ¨de vers le <strong>CollÃ¨ge RÃ©sistance</strong>. 
          </p>
          <div class="exploit-scenario">
            <div class="scenario-step">
              <span class="step-number">1</span>
              <span class="step-text">10 requÃªtes vÃ©rifient le solde simultanÃ©ment</span>
            </div>
            <div class="scenario-step">
              <span class="step-number">2</span>
              <span class="step-text">Toutes voient 1000 crÃ©dits disponibles</span>
            </div>
            <div class="scenario-step">
              <span class="step-number">3</span>
              <span class="step-text">Toutes effectuent le transfert â†’ Budget nÃ©gatif !</span>
            </div>
          </div>
          <div class="exploit-config">
            <div class="form-group">
              <label for="exploitRequests">Nombre de requÃªtes</label>
              <input type="number" id="exploitRequests" value="10" min="2" max="50">
            </div>
            <div class="form-group">
              <label for="exploitAmount">CrÃ©dits par requÃªte</label>
              <input type="number" id="exploitAmount" value="100" min="1">
            </div>
          </div>
          <button class="btn btn-danger btn-exploit" onclick="runExploit()">
            <span class="btn-icon">ğŸš€</span>
            <span class="btn-text">Lancer la dÃ©monstration</span>
          </button>
          <div class="exploit-results" id="exploitResults" hidden>
            <h3>ğŸ“Š RÃ©sultats de l'exploitation</h3>
            <div class="results-content" id="resultsContent"></div>
          </div>
        </div>
      </section>

      <!-- Transactions Section -->
      <section class="transactions-section">
        <h2 class="section-title">
          <span class="title-icon">ğŸ“œ</span>
          Journal des transferts
          <span class="transaction-count" id="transactionCount">0</span>
        </h2>
        <div class="transactions-table-container">
          <table class="transactions-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Source</th>
                <th>Destination</th>
                <th>CrÃ©dits</th>
                <th>Date</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="transactionsBody">
              <!-- Transactions will be loaded here -->
            </tbody>
          </table>
          <div class="empty-state" id="emptyTransactions">
            <span class="empty-icon">ğŸ“­</span>
            <span class="empty-text">Aucun transfert enregistrÃ©</span>
          </div>
        </div>
      </section>

      <!-- Educational Section -->
      <section class="education-section">
        <div class="education-header">
          <h2 class="section-title">
            <span class="title-icon">ğŸ“š</span>
            Comprendre et se protÃ©ger
          </h2>
          <p class="education-intro">
            La dÃ©marche <strong>NIRD</strong> encourage l'utilisation de logiciels libres 
            dont le code est auditable.  Voici comment Ã©viter cette faille :
          </p>
        </div>
        <div class="education-grid">
          <div class="education-card vulnerability">
            <div class="card-header">
              <span class="card-icon">ğŸ”“</span>
              <h3>La vulnÃ©rabilitÃ© TOCTOU</h3>
            </div>
            <p>
              <strong>Time Of Check To Time Of Use</strong> : une race condition 
              se produit quand le systÃ¨me vÃ©rifie une condition, puis l'utilise 
              plus tard, laissant une fenÃªtre d'exploitation. 
            </p>
            <div class="code-example">
              <code>
                <span class="comment">// âŒ Code vulnÃ©rable</span><br>
                <span class="keyword">if</span> (solde >= montant) {<br>
                &nbsp;&nbsp;<span class="comment">// â° FenÃªtre critique !</span><br>
                &nbsp;&nbsp;solde = solde - montant;<br>
                }
              </code>
            </div>
          </div>
          <div class="education-card solution">
            <div class="card-header">
              <span class="card-icon">ğŸ›¡ï¸</span>
              <h3>La solution : Transactions atomiques</h3>
            </div>
            <p>
              Les <strong>transactions SQL</strong> garantissent que toutes les opÃ©rations 
              s'exÃ©cutent ensemble ou pas du tout. C'est une bonne pratique 
              enseignÃ©e dans les formations au libre.
            </p>
            <div class="code-example">
              <code>
                <span class="comment">// âœ… Code sÃ©curisÃ©</span><br>
                <span class="keyword">BEGIN TRANSACTION</span>;<br>
                <span class="keyword">UPDATE</span> SET solde = solde - 100<br>
                &nbsp;&nbsp;<span class="keyword">WHERE</span> solde >= 100;<br>
                <span class="keyword">COMMIT</span>;
              </code>
            </div>
          </div>
          <div class="education-card nird">
            <div class="card-header">
              <span class="card-icon">ğŸ«</span>
              <h3>Le lien avec NIRD</h3>
            </div>
            <p>
              Les logiciels propriÃ©taires sont des <strong>boÃ®tes noires</strong>. 
              Impossible de vÃ©rifier leur sÃ©curitÃ©.  Les <strong>logiciels libres</strong> 
              permettent l'audit du code par la communautÃ© Ã©ducative.
            </p>
            <ul class="nird-benefits">
              <li>âœ… Code auditable et transparent</li>
              <li>âœ… Corrections rapides par la communautÃ©</li>
              <li>âœ… IndÃ©pendance vis-Ã -vis des Big Tech</li>
              <li>âœ… Formation des Ã©lÃ¨ves au code rÃ©el</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- NIRD CTA Section -->
      <section class="nird-cta-section">
        <div class="nird-cta-content">
          <div class="nird-cta-icon">ğŸ°</div>
          <h2>Rejoignez le Village NumÃ©rique RÃ©sistant !</h2>
          <p>
            La dÃ©marche NIRD accompagne les Ã©tablissements scolaires vers un 
            <strong>NumÃ©rique Inclusif, Responsable et Durable</strong>. 
            Ensemble, construisons l'Ã©cole numÃ©rique de demain.
          </p>
          <div class="nird-cta-buttons">
            <a href="https://nird.forge.apps.education. fr/" target="_blank" class="btn btn-nird">
              <span>ğŸŒ</span> DÃ©couvrir NIRD
            </a>
            <a href="https://forge.apps.education.fr/" target="_blank" class="btn btn-forge">
              <span>ğŸ”§</span> La Forge Ã‰ducative
            </a>
          </div>
          <div class="nird-pillars">
            <div class="pillar">
              <span class="pillar-icon">â™¿</span>
              <span class="pillar-name">Inclusif</span>
            </div>
            <div class="pillar">
              <span class="pillar-icon">âš–ï¸</span>
              <span class="pillar-name">Responsable</span>
            </div>
            <div class="pillar">
              <span class="pillar-icon">â™»ï¸</span>
              <span class="pillar-name">Durable</span>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-logo">
          <span>ğŸ›¡ï¸</span>
          <span>NIRD Security Lab</span>
        </div>
        <p class="footer-text">
          Projet Ã©ducatif rÃ©alisÃ© dans le cadre de la 
          <strong>Nuit de l'Info 2025</strong>
          <span class="separator">|</span>
          Sous licence libre
        </p>
        <div class="footer-links">
          <a href="https://nird.forge.apps.education. fr/" target="_blank">NIRD</a>
          <a href="https://forge.apps.education.fr/" target="_blank">Forge Ã‰ducative</a>
          <a href="https://www.nuitdelinfo.com/" target="_blank">Nuit de l'Info</a>
        </div>
      </div>
    </footer>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>
  </div>

  <script src="app.js"></script>
</body>
</html>